<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ISYA301 Study App</title>
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1976D2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ISYA301">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- React -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1976D2',
                        'primary-dark': '#1565C0',
                        'primary-light': '#42A5F5',
                        accent: '#FF9800',
                    }
                }
            }
        }
    </script>
    <style>
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Study Topics Data - 6 topics matching 6 assets
        const initialTopics = [
            {
                id: 1,
                title: "Agile Method Development",
                description: "Learn agile methodologies and iterative development practices",
                progress: 0,
                icon: "fa-rotate",
                page: "pages/agile-method.html"
            },
            {
                id: 2,
                title: "QA Chapter 5",
                description: "Quality Assurance concepts and testing strategies",
                progress: 0,
                icon: "fa-clipboard-check",
                page: "pages/qa-chapter5.html"
            },
            {
                id: 3,
                title: "Current Trends",
                description: "Current trends in information systems and technology",
                progress: 0,
                icon: "fa-chart-line",
                page: "pages/current-trends.html"
            },
            {
                id: 4,
                title: "Introduction to Software Engineering",
                description: "Fundamentals of software engineering and SDLC",
                progress: 0,
                icon: "fa-code",
                page: "pages/software-engineering.html"
            },
            {
                id: 5,
                title: "Requirements Engineering",
                description: "Requirements gathering, specification, and validation",
                progress: 0,
                icon: "fa-file-lines",
                page: "pages/requirements-engineering.html"
            },
            {
                id: 6,
                title: "Software Process",
                description: "Software process models and development activities",
                progress: 0,
                icon: "fa-gears",
                page: "pages/software-process.html"
            }
        ];

        // Study Materials Data with page links
        const studyMaterials = [
            { id: 1, name: "Agile Method Development.pptx", type: "pptx", size: "2.4 MB", page: "pages/materials/agile-method.html" },
            { id: 2, name: "Class exercise.docx", type: "docx", size: "156 KB", page: "pages/materials/class-exercise.html" },
            { id: 3, name: "INFORMATION SYSTEMS 3A _QA Chapter 5.pptx", type: "pptx", size: "3.1 MB", page: "pages/materials/qa-chapter5.html" },
            { id: 4, name: "INFORMATION SYSTEMS 3A-Current trends.pptx", type: "pptx", size: "2.8 MB", page: "pages/materials/current-trends.html" },
            { id: 5, name: "Introduction to Software Engineering.pptx", type: "pptx", size: "4.2 MB", page: "pages/materials/software-engineering.html" },
            { id: 6, name: "Requirements Engineering Concept.pptx", type: "pptx", size: "1.9 MB", page: "pages/materials/requirements-engineering.html" },
            { id: 7, name: "Software Process _Chapter 3.pptx", type: "pptx", size: "2.1 MB", page: "pages/materials/software-process.html" },
            { id: 8, name: "Test 2 Question Memorandum.pdf", type: "pdf", size: "245 KB", page: "pages/materials/test2-memorandum.html" }
        ];

        // Get file icon based on type
        const getFileIcon = (type) => {
            switch(type) {
                case 'pdf': return 'fa-file-pdf text-red-500';
                case 'pptx': return 'fa-file-powerpoint text-orange-500';
                case 'docx': return 'fa-file-word text-blue-500';
                case 'xlsx': return 'fa-file-excel text-green-500';
                case 'txt': return 'fa-file-lines text-gray-500';
                case 'jpg':
                case 'png': return 'fa-file-image text-purple-500';
                default: return 'fa-file text-gray-400';
            }
        };

        // Header Component
        const Header = () => (
            <header className="bg-primary text-white shadow-lg sticky top-0 z-50">
                <div className="container mx-auto px-4 py-4">
                    <div className="flex items-center justify-between">
                        <div className="flex items-center space-x-3">
                            <i className="fa-solid fa-graduation-cap text-2xl"></i>
                            <h1 className="text-xl font-bold">ISYA301 Study App</h1>
                        </div>
                        <nav className="flex space-x-4">
                            <button className="hover:bg-primary-dark px-3 py-2 rounded transition">
                                <i className="fa-solid fa-home"></i>
                            </button>
                            <button className="hover:bg-primary-dark px-3 py-2 rounded transition">
                                <i className="fa-solid fa-cog"></i>
                            </button>
                        </nav>
                    </div>
                </div>
            </header>
        );

        // Topic Card Component - Now navigates to page
        const TopicCard = ({ topic }) => (
            <a 
                href={topic.page}
                className="bg-white rounded-xl shadow-md p-5 hover:shadow-lg transition-shadow cursor-pointer border-l-4 border-primary block"
            >
                <div className="flex items-start space-x-4">
                    <div className="bg-primary-light/20 p-3 rounded-lg">
                        <i className={`fa-solid ${topic.icon} text-primary text-xl`}></i>
                    </div>
                    <div className="flex-1">
                        <h3 className="font-semibold text-gray-800 mb-1">{topic.title}</h3>
                        <p className="text-gray-500 text-sm mb-3">{topic.description}</p>
                        <div className="flex items-center space-x-3">
                            <div className="flex-1 bg-gray-200 rounded-full h-2">
                                <div 
                                    className="progress-bar bg-primary h-2 rounded-full"
                                    style={{ width: `${topic.progress}%` }}
                                ></div>
                            </div>
                            <span className="text-primary font-bold text-sm">{topic.progress}%</span>
                        </div>
                    </div>
                </div>
            </a>
        );

        // Material Card Component - Now navigates to page
        const MaterialCard = ({ material }) => (
            <a 
                href={material.page}
                className="bg-white rounded-lg shadow p-4 hover:shadow-md transition-shadow cursor-pointer flex items-center space-x-4 block"
            >
                <div className="text-3xl">
                    <i className={`fa-solid ${getFileIcon(material.type)}`}></i>
                </div>
                <div className="flex-1 min-w-0">
                    <h4 className="font-medium text-gray-800 truncate">{material.name}</h4>
                    <p className="text-gray-400 text-sm">{material.size}</p>
                </div>
                <i className="fa-solid fa-chevron-right text-gray-300"></i>
            </a>
        );

        // Materials Modal Component
        const MaterialsModal = ({ isOpen, onClose }) => {
            if (!isOpen) return null;

            return (
                <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
                    <div className="bg-white rounded-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden">
                        <div className="bg-primary text-white p-4 flex items-center justify-between">
                            <div className="flex items-center space-x-3">
                                <i className="fa-solid fa-folder-open text-xl"></i>
                                <h2 className="text-lg font-semibold">Study Materials</h2>
                            </div>
                            <button 
                                onClick={onClose}
                                className="hover:bg-primary-dark p-2 rounded-full transition"
                            >
                                <i className="fa-solid fa-times"></i>
                            </button>
                        </div>
                        <div className="p-4 overflow-y-auto max-h-[60vh]">
                            <p className="text-gray-500 mb-4">Click on a file to view its content</p>
                            <div className="space-y-3">
                                {studyMaterials.map(material => (
                                    <MaterialCard key={material.id} material={material} />
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Add Topic Modal Component
        const AddTopicModal = ({ isOpen, onClose, onAdd }) => {
            const [title, setTitle] = useState('');
            const [description, setDescription] = useState('');

            if (!isOpen) return null;

            const handleSubmit = (e) => {
                e.preventDefault();
                if (title && description) {
                    onAdd({ title, description });
                    setTitle('');
                    setDescription('');
                    onClose();
                }
            };

            return (
                <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
                    <div className="bg-white rounded-2xl w-full max-w-md overflow-hidden">
                        <div className="bg-primary text-white p-4 flex items-center justify-between">
                            <h2 className="text-lg font-semibold">Add New Topic</h2>
                            <button 
                                onClick={onClose}
                                className="hover:bg-primary-dark p-2 rounded-full transition"
                            >
                                <i className="fa-solid fa-times"></i>
                            </button>
                        </div>
                        <form onSubmit={handleSubmit} className="p-4 space-y-4">
                            <div>
                                <label className="block text-gray-700 font-medium mb-2">Topic Title</label>
                                <input 
                                    type="text"
                                    value={title}
                                    onChange={(e) => setTitle(e.target.value)}
                                    className="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary"
                                    placeholder="Enter topic title"
                                    required
                                />
                            </div>
                            <div>
                                <label className="block text-gray-700 font-medium mb-2">Description</label>
                                <textarea 
                                    value={description}
                                    onChange={(e) => setDescription(e.target.value)}
                                    className="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary"
                                    rows="3"
                                    placeholder="Enter topic description"
                                    required
                                ></textarea>
                            </div>
                            <button 
                                type="submit"
                                className="w-full bg-primary text-white py-3 rounded-lg font-semibold hover:bg-primary-dark transition"
                            >
                                <i className="fa-solid fa-plus mr-2"></i>
                                Add Topic
                            </button>
                        </form>
                    </div>
                </div>
            );
        };

        // Main App Component
        const App = () => {
            const [topics, setTopics] = useState(initialTopics);
            const [showMaterials, setShowMaterials] = useState(false);
            const [showAddTopic, setShowAddTopic] = useState(false);

            const handleAddTopic = ({ title, description }) => {
                const newTopic = {
                    id: topics.length + 1,
                    title,
                    description,
                    progress: 0,
                    icon: "fa-book",
                    page: "#"
                };
                setTopics([...topics, newTopic]);
            };

            return (
                <div className="min-h-screen bg-gray-100">
                    <Header />
                    
                    <main className="container mx-auto px-4 py-6">
                        {/* Welcome Section */}
                        <div className="bg-gradient-to-r from-primary to-primary-light text-white rounded-2xl p-6 mb-6 shadow-lg">
                            <h2 className="text-2xl font-bold mb-2">
                                <i className="fa-solid fa-hand-wave mr-2"></i>
                                Welcome to ISYA301 Study App!
                            </h2>
                            <p className="opacity-90">Track your progress and master your topics</p>
                        </div>

                        {/* Topics Section */}
                        <div className="flex items-center justify-between mb-4">
                            <h3 className="text-lg font-bold text-gray-800">
                                <i className="fa-solid fa-list-check mr-2 text-primary"></i>
                                Your Study Topics
                            </h3>
                            <span className="text-sm text-gray-500">{topics.length} topics</span>
                        </div>

                        <div className="grid gap-4 md:grid-cols-2">
                            {topics.map(topic => (
                                <TopicCard 
                                    key={topic.id} 
                                    topic={topic} 
                                />
                            ))}
                        </div>
                    </main>

                    {/* Floating Action Button */}
                    <button 
                        onClick={() => setShowAddTopic(true)}
                        className="fixed bottom-6 right-6 bg-primary text-white w-14 h-14 rounded-full shadow-lg hover:bg-primary-dark transition flex items-center justify-center text-xl hover:scale-110"
                    >
                        <i className="fa-solid fa-plus"></i>
                    </button>

                    {/* Modals */}
                    <MaterialsModal isOpen={showMaterials} onClose={() => setShowMaterials(false)} />
                    <AddTopicModal isOpen={showAddTopic} onClose={() => setShowAddTopic(false)} onAdd={handleAddTopic} />

                    {/* Footer */}
                    <footer className="bg-white border-t mt-8 py-4">
                        <div className="container mx-auto px-4 text-center text-gray-500 text-sm">
                            <p>
                                <i className="fa-solid fa-graduation-cap mr-1"></i>
                                ISYA301 Study App Â© 2026
                            </p>
                        </div>
                    </footer>
                </div>
            );
        };

        // Render the App
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
    <script>
        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(reg => console.log('Service Worker registered:', reg.scope))
                    .catch(err => console.log('Service Worker registration failed:', err));
            });
        }
    </script>
</body>
</html>
